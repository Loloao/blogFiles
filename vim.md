# vim
vim 是从`vi`发展而来的一个文本编辑器，这种效率（装逼）神器实在是深得我心，用它来写`markdown`文件既能写的快又能熟悉语法。在拜读完`vimtutor`之后，我马上使用它来写下这篇文章来记录 vim 的那些基本操作。
## 基本原理

### 命令和对象
vim 的许多命令都是都是由一个操作符和一个动作构成，比如使用删除操作的命令：
`d motion`
一个简短的动作列表：
- `w`: 从当前光标当前位置到下一个单词的起始处，不包括它的第一个字符。
- `e`: 从当前光标当前位置到当前单词的末尾，包括最后一个字符。
- `$`: 从当前光标直到行末。

### 使用计数指定动作
在动作前输入数字可以使它重复这么多次，比如删除动作：
`d number motion`

## 文本操作

### 移动光标
- `h`左移
- `j`下移
- `k`上移
- `l`右移
- `0`移动到行首

### 删除
`d`开头的删除命令可以将删除的内容放入一个寄存器中，使用`p`命令可以取出
- `x`删除光标所在的当前字符
- `dw` 可以删除当前单词，当输入`d`时，屏幕右下会出现`d`单词，如果单词不对，需要按下`esc`重新再来
- `d$` 删除当前单词到末尾
- `dd` 删除当前行，因为这个命令实在太高频了

### 插入
- `i`可以进入插入模式，按下`esc`键可以退出插入模式

### 添加
- `a`可以添加文本内容，需要使用`esc`键退出

### 撤销
- `u`撤销最后执行的命令
- `U`撤销对整行的修改
- `Ctrl r`可以重做被撤销的命令，也就是撤销掉撤销命令

### 更改
- `c`相当于`d`命令，只不过是操作是更改
- `cw`以及正确的单词可以更改单词，但它会进入插入模式，记得使用`esc`退出插入模式

### 置入
- `p`可以将最后一次删除的内容置于光标之后

### 替换
- `r`可以输入一个字符替换当前字符
- `R`可连续替换多个字符

### 打开
- `o`可以在当前行下方打开新的一行，同时进入插入模式
- `O`可以在当前行上方打开新的一行，同时进入插入模式

### 复制粘贴
- `y`用于复制文本，可输入`v`进入可视模式之后使用`y`进行复制，之后输入`p`进行粘贴
- `yw`也是操作符可以加入`w`或是`e`之类的进行操作

## 文件操作

### 定位及文件状态
- `ctrl g`可以显示当前编辑文件中当前光标所在行位置以及文件状态信息
- `G`可以直接跳转到某一指定行，先输入行号再输入大写`G`

### 搜索类命令
- `\`加上一个字符串可以在当前文件中查找该字符串
- `n`可以重复查找搜索的字符串
- `?`加上一个字符串可在当前文件中逆向查找该字符串
- `ctrl o`可以回退到之前的位置
- `ctrl i`跳转到较新的位置
- `:set ic`可以设置忽略大小写搜索
- `:set noic`可以设置不忽略大小写搜索
- `:set hls`高亮所有匹配短语

### 配对括号的查找
- 把光标放在任何一个`(`, `{`，或是`[`上，按`%`字符，此时光标会出现在配对的括号处，再按`%`可以跳会第一次按括号的地方

### 替换操作
- `:s/old/new/ 回车`可以替换光标所在行的第一个匹配的`old`为`new`
- `:s/old/new/g`则该行的所有匹配串都被替换
- `:#,#s/old/new/g`其中`#,#`表示替换操作的若干行中首尾两行的行号
- `:%s/old/new/g`替换整个文件的匹配字符串
- `:%s/old/new/gc`对整个文件的每个匹配字符串提示是否进行替换

### 在 vim 内执行外部操作
- `:!`输入一行命令，所有以`:`开头输入的命令都需要以`回车`结束才会执行

### 保存文件
- `:q!`不保存文件强行退出
- `:wq`保存文件修改退出
- `:w 文件名`可以将当前文件以文件名保存
- `v`键可以进入可视模式，移动光标对文本进行选取，之后按`:`可以看到屏幕底部出现了`:'<,'>`之后输入`w 文件名`就可以将选中文本保存到另一个文件

### 提取和合并文件
- `:r 文件名`可以将创建的文件提取进来，所提取的文件将在光标处置入

## 配置

### 在线帮助
- 按下`HELP`键
- 按下`F1`键
- 输入`:help 回车`键
- 提供一个正确的参数给`help`命令，可以找到该主题的在线帮助

### 创建启动脚本
- `:edit ~/.vimrc`用于编辑 vim 配置文件

### 补全功能
- `ctrl D`会显示匹配的命令列表，之后按`tab`键可补全命令，它对于`:help`命令非常有效
